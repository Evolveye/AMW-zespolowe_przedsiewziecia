{"version":3,"sources":["webpack:///./src/models/note.module.css","webpack:///./src/models/note.js","webpack:///./src/pages/user/notes.js","webpack:///./src/pages/user/user.module.css"],"names":["module","exports","Note","props","setDetails","hover","detailsSetter","className","classes","note","value","title","lecturerName","createDate","description","removeHoverDetails","render","onClick","onPointerEnter","onPointerLeave","lecturer","date","Intl","DateTimeFormat","year","month","day","hour","minute","formatToParts","DD","MM","YYYY","hh","mm","name","surname","React","Component","Notes","state","notesTable","platformsList","noteDetails","noteDetailsHover","showNotesTable","groups","myId","myNotes","filter","notes","user","id","setState","map","group","average","length","reduce","sum","Number","notesElements","key","jsx","leftColumn","noNote","platforms","empty","rightColumn","noTable","componentDidMount","fetch","URLS","GROUP_NOTES_GET","headers","Authentication","getToken","then","res","json","code","error","data","userId","console","platform"],"mappings":"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","file":"component---src-pages-user-notes-js-59d84e6b3ff53eb6a0e2.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"field\":\"note-module--field--1JndD\",\"note\":\"note-module--note--tykFr\",\"title\":\"note-module--title--119jd\",\"value\":\"note-module--value--pLWJx\"};","import React from \"react\"\r\n\r\nimport classes from \"./note.module.css\"\r\n\r\nexport default class Note extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    const { lecturer, date, value, description } = props.note\r\n    const options = {\r\n      year: `numeric`,\r\n      month: \"2-digit\",\r\n      day: \"2-digit\",\r\n      hour: `2-digit`,\r\n      minute: `2-digit`,\r\n    }\r\n    const [\r\n      { value: DD },\r\n      ,\r\n      { value: MM },\r\n      ,\r\n      { value: YYYY },\r\n      ,\r\n      { value: hh },\r\n      ,\r\n      { value: mm },\r\n    ] = new Intl.DateTimeFormat(`pl`, options).formatToParts(date)\r\n\r\n    this.createDate = `${YYYY}.${MM}.${DD} ${hh}:${mm}`\r\n    this.lecturerName = `${lecturer.name} ${lecturer.surname}`\r\n    this.description = description\r\n    this.value = value\r\n  }\r\n\r\n  setDetails = (hover = false) =>\r\n    this.props.detailsSetter(\r\n      <>\r\n        <div className={`${classes.note} ${this.props.className || \"\"}`}>{this.value}</div>\r\n\r\n        <dl>\r\n          <dt className={classes.title}>Wystawiający</dt>\r\n          <dd className={classes.value}>{this.lecturerName}</dd>\r\n\r\n          <dt className={classes.title}>Data wystawienia</dt>\r\n          <dd className={classes.value}>{this.createDate}</dd>\r\n\r\n          <dt className={classes.title}>Opis</dt>\r\n          <dd className={classes.value}>{this.description}</dd>\r\n        </dl>\r\n      </>,\r\n      hover\r\n    )\r\n\r\n  removeHoverDetails = () => this.props.detailsSetter(null, true)\r\n\r\n  render = () => (\r\n    <button\r\n      className={this.props.className || ``}\r\n      onClick={() => this.setDetails(false)}\r\n      onPointerEnter={() => this.setDetails(true)}\r\n      onPointerLeave={this.removeHoverDetails}\r\n    >\r\n      {this.props.note.value}\r\n    </button>\r\n  )\r\n}\r\n","import React from \"react\"\r\n\r\nimport URLS from \"../../utils/urls.js\"\r\n\r\nimport { AuthorizedContent, getToken } from \"../../utils/auth.js\"\r\nimport Layout from \"../../components/layout.js\"\r\nimport Note from \"../../models/note.js\"\r\n\r\nimport classes from \"./user.module.css\"\r\n\r\nexport default class Notes extends React.Component {\r\n  state = {\r\n    notesTable: null,\r\n    platformsList: [],\r\n    noteDetails: null,\r\n    noteDetailsHover: null,\r\n  }\r\n\r\n  componentDidMount() {\r\n    fetch(URLS.GROUP_NOTES_GET, {\r\n      headers: { Authentication: `Bearer ${getToken()}` },\r\n    })\r\n      .then(res => res.json())\r\n      .then(({ code, error, data, userId }) => {\r\n        if (error) {\r\n          return console.error({ code, error })\r\n        }\r\n\r\n        const platformsList = data.map(({ platform, groups }) => (\r\n          <button key={platform.id} onClick={() => this.showNotesTable(groups, userId)}>\r\n            {platform.name}\r\n          </button>\r\n        ))\r\n\r\n        this.setState({ platformsList })\r\n      })\r\n  }\r\n\r\n  showNotesTable = (groups, myId) => {\r\n    const myNotes = groups.filter( ({ notes }) => {\r\n      for (const { user } of notes)\r\n        if (user.id !== myId) return false\r\n\r\n      return true\r\n    } )\r\n    // const studentsNotes = groups.filter( ({ notes }) => {\r\n    //   for (const { lecturer } of notes)\r\n    //     if (lecturer.id != myId) return false\r\n    //\r\n    //   return true\r\n    // } )\r\n\r\n    this.setState({\r\n      notesTable: (\r\n        <table className=\"table\">\r\n          <thead className=\"thead\">\r\n            <tr>\r\n              <td>Nazwa grupy</td>\r\n              <td>Główny prowadzacy</td>\r\n              <td>Oceny cząstkowe</td>\r\n              <td>Średnia końcowa</td>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {myNotes.map(({ group, notes }) => {\r\n              const average = notes.length === 0 ? ` - ` :\r\n                notes.reduce((sum, { value }) => sum + Number(value), 0) /\r\n                notes.length\r\n\r\n              const notesElements = notes.map(note => (\r\n                <Note\r\n                  key={note.id}\r\n                  className={classes.note}\r\n                  note={note}\r\n                  detailsSetter={this.setDetails}\r\n                />\r\n              ))\r\n\r\n              return (\r\n                <tr key={group.id}>\r\n                  <td>{group.name}</td>\r\n                  <td>\r\n                    {group.lecturer.name} {group.lecturer.surname}\r\n                  </td>\r\n                  <td>{notesElements}</td>\r\n                  <td>{average}</td>\r\n                </tr>\r\n              )\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      ),\r\n    })\r\n  }\r\n\r\n  setDetails = (jsx, hover = false) => {\r\n    this.setState({\r\n      [hover ? `noteDetailsHover` : `noteDetails`]: jsx,\r\n    })\r\n  }\r\n\r\n  render = () => (\r\n    <AuthorizedContent>\r\n      <Layout className=\"main_wrapper-splited\">\r\n        <article className={classes.leftColumn}>\r\n          <section className={classes.noteDetails}>\r\n            <h2>Szczegóły oceny</h2>\r\n            {this.state.noteDetailsHover || this.state.noteDetails || (\r\n              <p className={classes.noNote}>Brak aktywnej oceny</p>\r\n            )}\r\n          </section>\r\n\r\n          <section className={classes.platforms}>\r\n            <h2>Wybierz platformę</h2>\r\n            {this.state.platformsList || (\r\n              <p className={classes.empty}>\r\n                Wygląda na to, że nie należysz do żadnej grupy, z której mógłyś\r\n                zdobywać oceny\r\n              </p>\r\n            )}\r\n          </section>\r\n        </article>\r\n\r\n        <article className={classes.rightColumn}>\r\n          <h1>Twoje oceny</h1>\r\n          {this.state.notesTable || (\r\n            <div className={classes.noTable}>\r\n              Wybierz platformę z lewej kolumny, aby zobaczyć zdobyte na niej\r\n              oceny\r\n            </div>\r\n          )}\r\n        </article>\r\n      </Layout>\r\n    </AuthorizedContent>\r\n  )\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"empty\":\"user-module--empty--3dGEr\",\"leftColumn\":\"user-module--leftColumn--FgVPi\",\"rightColumn\":\"user-module--rightColumn--IcaSD\",\"noteDetails\":\"user-module--noteDetails--10jHD\",\"noNote\":\"user-module--noNote--3mEdp\",\"platforms\":\"user-module--platforms--197AJ\",\"noTable\":\"user-module--noTable--3vr97\",\"note\":\"user-module--note--33qQ-\",\"rightColumnWithOverFlow\":\"user-module--rightColumnWithOverFlow--siagC\",\"hrWidth\":\"user-module--hrWidth--1FCfh\",\"sectionTitle\":\"user-module--sectionTitle--3NIkI\"};"],"sourceRoot":""}