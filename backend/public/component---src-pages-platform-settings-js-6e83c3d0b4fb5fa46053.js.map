{"version":3,"sources":["webpack:///./src/svg/lock.svg","webpack:///./src/pages/platform/settings.js","webpack:///./src/models/sygnet.js","webpack:///./src/svg/user.svg","webpack:///./src/components/form.module.css","webpack:///./src/pages/platform/platform.module.css","webpack:///./src/models/input.js","webpack:///./src/components/platformLayout.js","webpack:///./src/components/form.js","webpack:///./src/svg/email.svg"],"names":["module","exports","fields","title","name","type","SettingsView","props","hremovePlatform","fetch","URLS","PLATFORM$ID_DELETE","replace","platformId","method","headers","Authentication","getToken","then","res","json","code","success","error","console","navigate","render","className","to","submitName","address","PLATFORM$ID_PUT","onOk","response","log","classes","removeButton","onClick","query","urlSearchParams","get","React","Component","style","display","backgroundColor","borderRadius","border","size","width","height","data","icon","autoComplete","svgIcon","svgUser","svgLock","svgEmail","getIcon","jsx","button","textarea","placeholder","label","key","src","alt","input","navItems","urn","permName","groupsLisMap","id","color","linkAddress","menuLisBuilder","perms","filter","map","children","url","GROUP_FROM_PLATFORM$ID_GET","useState","authFetch","groups","group","groupsLis","setGroupsRows","getPlatformPerms","menuLis","setMenuRows","useEffect","cb","length","Form","state","handleSubmit","e","preventDefault","methodNotUppered","toUpperCase","dataTosend","Array","from","target","elements","reduce","obj","field","value","body","includes","JSON","stringify","Error","text","parse","err","onUnknownResponse","onError","catch","form","onSubmit","header","main","submit","inputData"],"mappings":"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","file":"component---src-pages-platform-settings-js-6e83c3d0b4fb5fa46053.js","sourcesContent":["module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDQ3MCA0NzAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ3MCA0NzA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxwYXRoIGQ9Ik0xNjIuNSwxMDIuNWMwLTM5Ljk3NywzMi41MjMtNzIuNSw3Mi41LTcyLjVzNzIuNSwzMi41MjMsNzIuNSw3Mi41VjE2MGgzMHYtNTcuNUMzMzcuNSw0NS45ODEsMjkxLjUxOSwwLDIzNSwwDQoJCVMxMzIuNSw0NS45ODEsMTMyLjUsMTAyLjVWMTYwaDMwVjEwMi41eiIvPg0KCTxwYXRoIGQ9Ik03Ny41LDE5MHYyODBoMzE1VjE5MEg3Ny41eiBNMjUwLDMzOC4wNTh2NTMuNTU3aC0zMHYtNTMuNTU3Yy0xMS44MjQtNS42MTgtMjAtMTcuNjY2LTIwLTMxLjYyN2MwLTE5LjMzLDE1LjY3LTM1LDM1LTM1DQoJCXMzNSwxNS42NywzNSwzNUMyNzAsMzIwLjM5MiwyNjEuODI0LDMzMi40NDEsMjUwLDMzOC4wNTh6Ii8+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8L3N2Zz4NCg==\"","import React from \"react\"\r\nimport { Link } from \"gatsby\"\r\n\r\nimport { urlSearchParams } from \"../../utils/functions.js\"\r\nimport URLS from \"../../utils/urls.js\"\r\n\r\nimport Layout from \"../../components/platformLayout.js\"\r\nimport Form from \"../../components/form.js\"\r\n\r\nimport classes from \"./platform.module.css\"\r\nimport { getToken } from \"../../utils/auth.js\"\r\nimport { navigate } from \"gatsby\"\r\n\r\nconst fields = [\r\n  { title: `Nazwa`, name: `name` },\r\n  { title: `Opis`, name: `description`, type: `textarea` },\r\n]\r\n\r\nexport default class SettingsView extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    const query = urlSearchParams()\r\n\r\n    this.platformId = query.get(`platformId`)\r\n  }\r\n\r\n  hremovePlatform = () => {\r\n    fetch(URLS.PLATFORM$ID_DELETE.replace(`:platformId`, this.platformId), {\r\n      method: `DELETE`,\r\n      headers: { Authentication: `Bearer ${getToken()}` },\r\n    })\r\n      .then(res => res.json())\r\n      .then(({ code, success, error }) => {\r\n        if (error) {\r\n          return console.error(error)\r\n        }\r\n\r\n        navigate(`/user/me`)\r\n      })\r\n  }\r\n\r\n  render = () => (\r\n    <Layout className=\"is-centered\">\r\n      <Link\r\n        className=\"return_link\"\r\n        to={`/platform/it?platformId=${this.platformId}`}\r\n      >\r\n        Powrót do widoku platformy\r\n      </Link>\r\n\r\n      <Form\r\n        fields={fields}\r\n        title=\"Ustawienia platformy\"\r\n        submitName=\"Zatwierdź\"\r\n        method=\"POST\"\r\n        headers={{ \"Content-Type\": \"application/json\" }}\r\n        address={URLS.PLATFORM$ID_PUT}\r\n        onOk={response => {\r\n          console.log(response)\r\n        }}\r\n        // onError={(error) => console.log( code)}\r\n      />\r\n      <button className={classes.removeButton} onClick={this.hremovePlatform}>\r\n        Skasuj\r\n      </button>\r\n    </Layout>\r\n  )\r\n}\r\n","import React from \"react\"\r\n\r\n/** @type {React.CSSProperties} */\r\nconst style = {\r\n  display: `block`,\r\n  backgroundColor: `#96d588`,\r\n  borderRadius: `50%`,\r\n  border: `1px solid #aaa`,\r\n}\r\n\r\nexport default ({ size = 100 }) => (\r\n  <div style={{ width: `${size}px`, height: `${size}px`, ...style }}></div>\r\n)\r\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxnPg0KCQk8cGF0aCBkPSJNMjU2LDBjLTc0LjQzOSwwLTEzNSw2MC41NjEtMTM1LDEzNXM2MC41NjEsMTM1LDEzNSwxMzVzMTM1LTYwLjU2MSwxMzUtMTM1UzMzMC40MzksMCwyNTYsMHoiLz4NCgk8L2c+DQo8L2c+DQo8Zz4NCgk8Zz4NCgkJPHBhdGggZD0iTTQyMy45NjYsMzU4LjE5NUMzODcuMDA2LDMyMC42NjcsMzM4LjAwOSwzMDAsMjg2LDMwMGgtNjBjLTUyLjAwOCwwLTEwMS4wMDYsMjAuNjY3LTEzNy45NjYsNTguMTk1DQoJCQlDNTEuMjU1LDM5NS41MzksMzEsNDQ0LjgzMywzMSw0OTdjMCw4LjI4NCw2LjcxNiwxNSwxNSwxNWg0MjBjOC4yODQsMCwxNS02LjcxNiwxNS0xNQ0KCQkJQzQ4MSw0NDQuODMzLDQ2MC43NDUsMzk1LjUzOSw0MjMuOTY2LDM1OC4xOTV6Ii8+DQoJPC9nPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPC9zdmc+DQo=\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"form-module--form--2pvl6\",\"header\":\"form-module--header--hEF4-\",\"title\":\"form-module--title--2iPEw\",\"main\":\"form-module--main--1K9wY\",\"label\":\"form-module--label--2tuTl\",\"icon\":\"form-module--icon--1YWpG\",\"input\":\"form-module--input--1Onr-\",\"button\":\"form-module--button--1tumX\",\"textarea\":\"form-module--textarea--2fwil\",\"submit\":\"form-module--submit--3LLML\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"platform-module--main--ZTUya\",\"removeButton\":\"platform-module--removeButton--2eOQv\"};","import React from \"react\"\r\n\r\nimport svgUser from \"../svg/user.svg\"\r\nimport svgLock from \"../svg/lock.svg\"\r\nimport svgEmail from \"../svg/email.svg\"\r\n\r\n// /** @type {React.CSSProperties} */\r\n// const style = {\r\n//   display: `block`,\r\n//   backgroundColor: `#96d588`,\r\n//   borderRadius: `50%`,\r\n//   border: `1px solid #aaa`,\r\n// }\r\n\r\nfunction getIcon(name) {\r\n  switch (name) {\r\n    case `user`:\r\n      return svgUser\r\n    case `lock`:\r\n      return svgLock\r\n    case `email`:\r\n      return svgEmail\r\n\r\n    default:\r\n      return null\r\n  }\r\n}\r\n\r\nexport default ({ classes = {}, data }) => {\r\n  const { icon, title, name, type = `text`, autoComplete } = data\r\n  const svgIcon = getIcon(icon)\r\n\r\n  let jsx = null\r\n\r\n  switch (type) {\r\n    case `button`:\r\n      jsx = (\r\n        <button className={classes.button} type=\"button\" name={name}>\r\n          {title}\r\n        </button>\r\n      )\r\n      break\r\n\r\n    case `textarea`:\r\n      jsx = (\r\n        <textarea\r\n          className={classes.textarea}\r\n          name={name}\r\n          placeholder={title}\r\n        />\r\n      )\r\n      break\r\n\r\n    default:\r\n      jsx = (\r\n        <label className={classes.label} key={name}>\r\n          {svgIcon && (\r\n            <img className={classes.icon} src={svgIcon} alt={title || type} />\r\n          )}\r\n          <input\r\n            className={classes.input}\r\n            type={type}\r\n            name={name}\r\n            placeholder={title}\r\n            autoComplete={autoComplete}\r\n          />\r\n        </label>\r\n      )\r\n  }\r\n\r\n  return jsx\r\n  // ))\r\n}\r\n\r\n// let _ = [].map(field => {\r\n//   const icon = Form.getIcon(field.icon)\r\n\r\n//   if (icon) field.icon = icon\r\n//   else delete field.icon\r\n\r\n//   return field\r\n// })\r\n// .map(({ title = ``, type = `text`, name, icon, autoComplete = null }) => (\r\n//   <label className={classes.label} key={name}>\r\n//     {icon && (\r\n//       <img className={classes.icon} src={icon} alt={title || type} />\r\n//     )}\r\n//     <input\r\n//       className={classes.input}\r\n//       type={type}\r\n//       name={name}\r\n//       placeholder={title}\r\n//       autoComplete={autoComplete}\r\n//     />\r\n//   </label>\r\n// ))\r\n","import React, { useEffect, useState } from \"react\"\r\nimport { Link } from \"gatsby\"\r\n\r\nimport URLS from \"../utils/urls.js\"\r\nimport { urlSearchParams } from \"../utils/functions.js\"\r\nimport {\r\n  AuthorizedContent,\r\n  getPlatformPerms,\r\n  authFetch,\r\n} from \"../utils/auth.js\"\r\n\r\nimport Layout from \"./layout.js\"\r\n\r\nimport FlatTile from \"../models/flatTile.js\"\r\n\r\nconst navItems = [\r\n  { urn: `settings`, name: `Ogólne`, permName: `isMaster` },\r\n  { urn: `users`, name: `Użytkownicy`, permName: `isMaster` },\r\n  // { urn: `roles`, name: `Role`, permName: `isMaster` },\r\n  { urn: `groups`, name: `Grupy`, permName: `isMaster` },\r\n]\r\n\r\nconst groupsLisMap = ({ id, name }, platformId) => (\r\n  <li key={id}>\r\n    <FlatTile\r\n      title={name}\r\n      color={`#3e8bff`}\r\n      linkAddress={`/group/it?platformId=${platformId}&groupId=${id}`}\r\n    />\r\n  </li>\r\n)\r\n\r\nconst menuLisBuilder = (perms, platformId) =>\r\n  navItems\r\n    .filter(({ permName }) => !permName || perms[permName])\r\n    .map(({ urn, name }) => (\r\n      <li key={urn} className=\"list-item\">\r\n        <Link to={`/platform/${urn}?platformId=${platformId}`}>{name}</Link>\r\n      </li>\r\n    ))\r\n\r\nexport default ({ children, className = `` }) => {\r\n  const query = urlSearchParams()\r\n  const platformId = query.get(`platformId`)\r\n  const url = URLS.GROUP_FROM_PLATFORM$ID_GET.replace(`:platformId`, platformId)\r\n\r\n  const [groupsLis, setGroupsRows] = useState(\r\n    (authFetch({ url }) || { groups: [] }).groups.map(group =>\r\n      groupsLisMap(group, platformId)\r\n    )\r\n  )\r\n  const [menuLis, setMenuRows] = useState(\r\n    menuLisBuilder(getPlatformPerms(platformId) || {}, platformId)\r\n  )\r\n\r\n  useEffect(() => {\r\n    authFetch({\r\n      url,\r\n      cb: ({ groups }) =>\r\n        setGroupsRows(groups.map(group => groupsLisMap(group, platformId))),\r\n    })\r\n  }, [url, platformId])\r\n\r\n  useEffect(() => {\r\n    getPlatformPerms(platformId, perms => {\r\n      setMenuRows(menuLisBuilder(perms || {}, platformId))\r\n    })\r\n  }, [platformId])\r\n\r\n  return (\r\n    <AuthorizedContent>\r\n      <Layout className=\"main_wrapper-splited\">\r\n        <nav className=\"main_wrapper-splited-left_column\">\r\n          {menuLis.length ? (\r\n            <>\r\n              <h2>Panel ustawień</h2>\r\n              <ul className=\"list\">{menuLis}</ul>\r\n              <hr />\r\n            </>\r\n          ) : null}\r\n\r\n          <h2>Grupy</h2>\r\n          <ul className=\"list\">\r\n            {groupsLis.length ? groupsLis : \"Nie należysz do żadnej grupy\"}\r\n          </ul>\r\n        </nav>\r\n\r\n        <article className={`main_wrapper-splited-right_column ${className}`}>\r\n          {children}\r\n        </article>\r\n      </Layout>\r\n    </AuthorizedContent>\r\n  )\r\n}\r\n","import React from \"react\"\r\n\r\nimport Sygnet from \"../models/sygnet.js\"\r\nimport Input from \"../models/input.js\"\r\n\r\nimport classes from \"./form.module.css\"\r\n\r\nexport default class Form extends React.Component {\r\n  state = {\r\n    fields: [],\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state.fields = props.fields.map(inputData => (\r\n      <Input key={inputData.title} classes={classes} data={inputData} />\r\n    ))\r\n  }\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault()\r\n\r\n    const { address, method: methodNotUppered = `GET`, headers } = this.props\r\n    const method = methodNotUppered.toUpperCase()\r\n    const fields = Array.from(e.target.elements).filter(({ name }) => name)\r\n    const dataTosend = fields.reduce(\r\n      (obj, field) => ({\r\n        [field.name]: field.value,\r\n        ...obj,\r\n      }),\r\n      {}\r\n    )\r\n    const body = [`GET`, `HEAD`].includes(method)\r\n      ? null\r\n      : JSON.stringify(dataTosend)\r\n\r\n    if ([`GET`].includes(method))\r\n      throw new Error(`Metoda nie jest jeszcze wspeirana w tym komponencie`)\r\n\r\n    fetch(address, {\r\n      method,\r\n      headers,\r\n      body,\r\n    })\r\n      .then(res => res.text())\r\n      .then(response => {\r\n        /** @type {{error:string}|Object<string,*>} */\r\n        let json = null\r\n\r\n        try {\r\n          json = JSON.parse(response)\r\n        } catch (err) {\r\n          const { onUnknownResponse } = this.props\r\n\r\n          console.error(\r\n            `ERROR: Nieoczekiwana odpowiedź serwera, Błąd parsowania odpowiedzi\\n` +\r\n              `Powód błędu: ${err}\\n` +\r\n              `Wiadomość z serwera: ${response}`\r\n          )\r\n\r\n          return onUnknownResponse ? onUnknownResponse(err, response) : null\r\n        }\r\n\r\n        if (json.error) {\r\n          const { onError } = this.props\r\n          const error = JSON.parse(response)\r\n\r\n          console.error(`ERROR: Odpowiedź serwera:`, error)\r\n\r\n          return onError ? onError(error) : null\r\n        }\r\n\r\n        if (this.props.onOk) this.props.onOk(JSON.parse(response))\r\n      })\r\n      .catch(() => {})\r\n  }\r\n\r\n  render = () => (\r\n    <form\r\n      className={classes.form}\r\n      method={this.props.method || \"GET\"}\r\n      onSubmit={this.handleSubmit}\r\n    >\r\n      <header className={classes.header}>\r\n        <Sygnet size={50} />\r\n\r\n        <h3 className={classes.title}>{this.props.title}</h3>\r\n      </header>\r\n\r\n      <article className={classes.main}>\r\n        {this.state.fields}\r\n\r\n        <button type=\"submit\" className={classes.submit}>\r\n          {this.props.submitName}\r\n        </button>\r\n      </article>\r\n    </form>\r\n  )\r\n}\r\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGc+DQoJCTxwb2x5Z29uIHBvaW50cz0iMzM5LjM5MiwyNTguNjI0IDUxMiwzNjcuNzQ0IDUxMiwxNDQuODk2IAkJIi8+DQoJPC9nPg0KPC9nPg0KPGc+DQoJPGc+DQoJCTxwb2x5Z29uIHBvaW50cz0iMCwxNDQuODk2IDAsMzY3Ljc0NCAxNzIuNjA4LDI1OC42MjQgCQkiLz4NCgk8L2c+DQo8L2c+DQo8Zz4NCgk8Zz4NCgkJPHBhdGggZD0iTTQ4MCw4MEgzMkMxNi4wMzIsODAsMy4zNiw5MS45MDQsMC45NiwxMDcuMjMyTDI1NiwyNzUuMjY0bDI1NS4wNC0xNjguMDMyQzUwOC42NCw5MS45MDQsNDk1Ljk2OCw4MCw0ODAsODB6Ii8+DQoJPC9nPg0KPC9nPg0KPGc+DQoJPGc+DQoJCTxwYXRoIGQ9Ik0zMTAuMDgsMjc3Ljk1MmwtNDUuMjgsMjkuODI0Yy0yLjY4OCwxLjc2LTUuNzI4LDIuNjI0LTguOCwyLjYyNGMtMy4wNzIsMC02LjExMi0wLjg2NC04LjgtMi42MjRsLTQ1LjI4LTI5Ljg1Ng0KCQkJTDEuMDI0LDQwNC45OTJDMy40ODgsNDIwLjE5MiwxNi4wOTYsNDMyLDMyLDQzMmg0NDhjMTUuOTA0LDAsMjguNTEyLTExLjgwOCwzMC45NzYtMjcuMDA4TDMxMC4wOCwyNzcuOTUyeiIvPg0KCTwvZz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjwvc3ZnPg0K\""],"sourceRoot":""}