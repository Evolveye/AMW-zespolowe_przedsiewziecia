{"version":3,"sources":["webpack:///./src/pages/group/roles.js","webpack:///./src/components/groupLayout.js"],"names":["query","urlSearchParams","href","get","className","to","menyItems","urn","name","permName","meetsLisMap","platformAndGroupQuery","id","dateStart","description","key","title","getDate","color","linkAddress","menuLisBuilder","perms","filter","map","children","platformId","groupId","url","URLS","MEET_FROM_GROUP$ID_GET","replace","useState","authFetch","meets","meet","meetsLis","setMeetsRows","getGroupPerms","menuLis","setMenuRows","useEffect","cb","length"],"mappings":"8FAAA,oEASe,qBACb,IAAMA,EAAQC,cACRC,EAAI,wBAA2BF,EAAMG,IACzC,cADQ,YAEGH,EAAMG,IAAI,WAEvB,OACE,kBAAC,IAAD,CAAQC,UAAU,eAChB,kBAAC,OAAD,CAAMA,UAAU,cAAcC,GAAIH,GAAlC,0BAIA,gD,oCCrBN,iGAWMI,EAAY,CAEhB,CAAEC,IAAI,QAAUC,KAAK,QAAUC,SAAS,YACxC,CAAEF,IAAI,QAAUC,KAAK,cAAgBC,SAAS,YAE9C,CAAEF,IAAI,QAAUC,KAAK,YAAcC,SAAS,aAGxCC,EAAc,SAAC,EAAgCC,GAAjC,IAAGC,EAAH,EAAGA,GAAIC,EAAP,EAAOA,UAAWC,EAAlB,EAAkBA,YAAlB,OAClB,wBAAIC,IAAKH,GACP,kBAAC,IAAD,CACEI,MAAOC,YAAQ,qBAAsBJ,GACrCC,YAAaA,EACbI,MAAK,UACLC,YAAW,YAAcR,EAAd,WAA8CC,MAIzDQ,EAAiB,SAACC,EAAOV,GAAR,OACrBL,EACGgB,QAAO,gBAAGb,EAAH,EAAGA,SAAH,OAAmBA,GAAYY,EAAMZ,MAC5Cc,KAAI,gBAAGhB,EAAH,EAAGA,IAAKC,EAAR,EAAQA,KAAR,OACH,wBAAIO,IAAKR,EAAKH,UAAU,aACtB,kBAAC,OAAD,CAAMC,GAAE,UAAYE,EAAZ,IAAmBI,GAA0BH,QAI9C,gBAAmC,IAAhCgB,EAA+B,EAA/BA,SAA+B,IAArBpB,iBAAqB,WACzCJ,EAAQC,cAERwB,EAAazB,EAAMG,IAAN,cACbuB,EAAU1B,EAAMG,IAAN,WACVQ,EAAqB,cAAiBc,EAAjB,YAAuCC,EAC5DC,EAAMC,IAAKC,uBAAuBC,QAA5B,WAAgDJ,GANb,EAQdK,oBAC9BC,YAAU,CAAEL,SAAU,CAAEM,MAAO,KAAMA,MAAMV,KAAI,SAAAW,GAAI,OAClDxB,EAAYwB,EAAMvB,OAFfwB,EARwC,KAQ9BC,EAR8B,OAahBL,mBAC7BX,EAAeiB,YAAcX,IAAY,GAAIf,IADxC2B,EAbwC,KAa/BC,EAb+B,KAiC/C,OAhBAC,qBAAU,WACRR,YAAU,CACRL,MACAc,GAAI,gBAAGR,EAAH,EAAGA,MAAH,OACFG,EACEH,EAAMV,KAAI,SAAAW,GAAI,OAAIxB,EAAYwB,EAAMvB,YAGzC,CAACgB,EAAKhB,IAET6B,qBAAU,WACRH,YAAcX,GAAS,SAAAL,GACrBkB,EAAYnB,EAAeC,GAAS,GAAIV,SAEzC,CAACe,EAASf,IAGX,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAQP,UAAU,wBAChB,yBAAKA,UAAU,oCACZkC,EAAQI,OACP,oCACE,8CACA,wBAAItC,UAAU,QAAQkC,GACtB,8BAEA,KAEJ,yCACA,wBAAIlC,UAAU,QACX+B,EAASO,OAASP,EAAW,sCAIlC,6BAAS/B,UAAS,qCAAuCA,GACtDoB","file":"component---src-pages-group-roles-js-a803bd871854292e9d31.js","sourcesContent":["import React from \"react\"\r\nimport { Link } from \"gatsby\"\r\n\r\nimport { urlSearchParams } from \"../../utils/functions.js\"\r\n\r\nimport Layout from \"../../components/groupLayout.js\"\r\n\r\n// import classes from \"./group.module.css\"\r\n\r\nexport default () => {\r\n  const query = urlSearchParams()\r\n  const href = `/group/it?platformId=${query.get(\r\n    \"platformId\"\r\n  )}&groupId=${query.get(\"groupId\")}`\r\n\r\n  return (\r\n    <Layout className=\"is-centered\">\r\n      <Link className=\"return_link\" to={href}>\r\n        Powrót do widoku grupy\r\n      </Link>\r\n\r\n      <h1>Grupa -- role</h1>\r\n    </Layout>\r\n  )\r\n}\r\n","import React, { useEffect, useState } from \"react\"\r\nimport { Link } from \"gatsby\"\r\n\r\nimport { urlSearchParams, getDate } from \"../utils/functions.js\"\r\nimport { AuthorizedContent, authFetch, getGroupPerms } from \"../utils/auth.js\"\r\nimport URLS from \"../utils/urls.js\"\r\n\r\nimport Layout from \"./layout.js\"\r\n\r\nimport FlatTile from \"../models/flatTile.js\"\r\n\r\nconst menyItems = [\r\n  // { urn: `settings`, name: `Ustawienia ogólne`, permName:`isMaster` },\r\n  { urn: `notes`, name: `Oceny`, permName: `isMaster` },\r\n  { urn: `users`, name: `Użytkownicy`, permName: `isMaster` },\r\n  // { urn: `roles`, name: `Role`, permName:`isMaster` },\r\n  { urn: `meets`, name: `Spotkania`, permName: `isMaster` },\r\n]\r\n\r\nconst meetsLisMap = ({ id, dateStart, description }, platformAndGroupQuery) => (\r\n  <li key={id}>\r\n    <FlatTile\r\n      title={getDate(`YYYY.MM.DD - hh:mm`, dateStart)}\r\n      description={description}\r\n      color={`#3e8bff`}\r\n      linkAddress={`/meet/it?${platformAndGroupQuery}&meetId=${id}`}\r\n    />\r\n  </li>\r\n)\r\nconst menuLisBuilder = (perms, platformAndGroupQuery) =>\r\n  menyItems\r\n    .filter(({ permName }) => !permName || perms[permName])\r\n    .map(({ urn, name }) => (\r\n      <li key={urn} className=\"list-item\">\r\n        <Link to={`/group/${urn}?${platformAndGroupQuery}`}>{name}</Link>\r\n      </li>\r\n    ))\r\n\r\nexport default ({ children, className = `` }) => {\r\n  const query = urlSearchParams()\r\n\r\n  const platformId = query.get(`platformId`)\r\n  const groupId = query.get(`groupId`)\r\n  const platformAndGroupQuery = `platformId=${platformId}&groupId=${groupId}`\r\n  const url = URLS.MEET_FROM_GROUP$ID_GET.replace(`:groupId`, groupId)\r\n\r\n  const [meetsLis, setMeetsRows] = useState(\r\n    (authFetch({ url }) || { meets: [] }).meets.map(meet =>\r\n      meetsLisMap(meet, platformAndGroupQuery)\r\n    )\r\n  )\r\n  const [menuLis, setMenuRows] = useState(\r\n    menuLisBuilder(getGroupPerms(groupId) || {}, platformAndGroupQuery)\r\n  )\r\n\r\n  useEffect(() => {\r\n    authFetch({\r\n      url,\r\n      cb: ({ meets }) =>\r\n        setMeetsRows(\r\n          meets.map(meet => meetsLisMap(meet, platformAndGroupQuery))\r\n        ),\r\n    })\r\n  }, [url, platformAndGroupQuery])\r\n\r\n  useEffect(() => {\r\n    getGroupPerms(groupId, perms => {\r\n      setMenuRows(menuLisBuilder(perms || {}, platformAndGroupQuery))\r\n    })\r\n  }, [groupId, platformAndGroupQuery])\r\n\r\n  return (\r\n    <AuthorizedContent>\r\n      <Layout className=\"main_wrapper-splited\">\r\n        <nav className=\"main_wrapper-splited-left_column\">\r\n          {menuLis.length ? (\r\n            <>\r\n              <h2>Panel ustawień</h2>\r\n              <ul className=\"list\">{menuLis}</ul>\r\n              <hr />\r\n            </>\r\n          ) : null}\r\n\r\n          <h2>Spotkania</h2>\r\n          <ul className=\"list\">\r\n            {meetsLis.length ? meetsLis : \"Nie należysz do żadnego spotkania\"}\r\n          </ul>\r\n        </nav>\r\n\r\n        <article className={`main_wrapper-splited-right_column ${className}`}>\r\n          {children}\r\n        </article>\r\n      </Layout>\r\n    </AuthorizedContent>\r\n  )\r\n}\r\n"],"sourceRoot":""}